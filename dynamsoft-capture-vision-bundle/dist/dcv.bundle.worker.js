/*!
* Dynamsoft JavaScript Library
* @product Dynamsoft Capture Vision JS Edition Bundle
* @website http://www.dynamsoft.com
* @copyright Copyright 2025, Dynamsoft Corporation
* @author Dynamsoft
* @version 3.0.3001
* @fileoverview Dynamsoft JavaScript Library for Capture Vision
* More info on DCV JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/
*/
!function(){"use strict";const e=e=>e&&"object"==typeof e&&"function"==typeof e.then,t=(async()=>{})().constructor;class r extends t{get status(){return this._s}get isPending(){return"pending"===this._s}get isFulfilled(){return"fulfilled"===this._s}get isRejected(){return"rejected"===this._s}get task(){return this._task}set task(r){let n;this._task=r,e(r)?n=r:"function"==typeof r&&(n=new t(r)),n&&(async()=>{try{const e=await n;r===this._task&&this.resolve(e)}catch(e){r===this._task&&this.reject(e)}})()}get isEmpty(){return null==this._task}constructor(t){let r,n;super(((e,t)=>{r=e,n=t})),this._s="pending",this.resolve=t=>{this.isPending&&(e(t)?this.task=t:(this._s="fulfilled",r(t)))},this.reject=e=>{this.isPending&&(this._s="rejected",n(e))},this.task=t}}var n,s,a,i;(async()=>{})().constructor,"function"==typeof SuppressedError&&SuppressedError,(i=n||(n={}))[i.BOPM_BLOCK=0]="BOPM_BLOCK",i[i.BOPM_UPDATE=1]="BOPM_UPDATE",function(e){e[e.CCUT_AUTO=0]="CCUT_AUTO",e[e.CCUT_FULL_CHANNEL=1]="CCUT_FULL_CHANNEL",e[e.CCUT_Y_CHANNEL_ONLY=2]="CCUT_Y_CHANNEL_ONLY",e[e.CCUT_RGB_R_CHANNEL_ONLY=3]="CCUT_RGB_R_CHANNEL_ONLY",e[e.CCUT_RGB_G_CHANNEL_ONLY=4]="CCUT_RGB_G_CHANNEL_ONLY",e[e.CCUT_RGB_B_CHANNEL_ONLY=5]="CCUT_RGB_B_CHANNEL_ONLY"}(s||(s={})),function(e){e[e.IPF_BINARY=0]="IPF_BINARY",e[e.IPF_BINARYINVERTED=1]="IPF_BINARYINVERTED",e[e.IPF_GRAYSCALED=2]="IPF_GRAYSCALED",e[e.IPF_NV21=3]="IPF_NV21",e[e.IPF_RGB_565=4]="IPF_RGB_565",e[e.IPF_RGB_555=5]="IPF_RGB_555",e[e.IPF_RGB_888=6]="IPF_RGB_888",e[e.IPF_ARGB_8888=7]="IPF_ARGB_8888",e[e.IPF_RGB_161616=8]="IPF_RGB_161616",e[e.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",e[e.IPF_ABGR_8888=10]="IPF_ABGR_8888",e[e.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",e[e.IPF_BGR_888=12]="IPF_BGR_888",e[e.IPF_BINARY_8=13]="IPF_BINARY_8",e[e.IPF_NV12=14]="IPF_NV12",e[e.IPF_BINARY_8_INVERTED=15]="IPF_BINARY_8_INVERTED"}(a||(a={}));const o="undefined"==typeof self,_="function"==typeof importScripts,c=(()=>{if(!_){if(!o&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"}})(),E=e=>"number"==typeof e&&!Number.isNaN(e),l=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),d=e=>!(!(e=>!(!l(e)||!E(e.width)||e.width<=0||!E(e.height)||e.height<=0||!E(e.stride)||e.stride<=0||!("format"in e)||"tag"in e&&!u(e.tag)))(e)||!E(e.bytes.length)&&!E(e.bytes.ptr)),u=e=>null===e||!!l(e)&&!!E(e.imageId)&&"type"in e,I=async(e,t)=>await new Promise(((r,n)=>{let s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.send(),s.onloadend=async()=>{s.status<200||s.status>=300?n(new Error(e+" "+s.status)):r(s.response)},s.onerror=()=>{n(new Error("Network Error: "+s.statusText))}}));let f,m,T,p,C;var y,g,h,A,N,R,D,O,S;"undefined"!=typeof navigator&&(f=navigator,m=f.userAgent,T=f.platform,p=f.mediaDevices),function(){if(!o){const e={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:f.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:T,search:"Win"},Mac:{str:T},Linux:{str:T}};let r="unknownBrowser",n=0,s="unknownOS";for(let t in e){const s=e[t]||{};let a=s.str||m,i=s.search||t,o=s.verStr||m,_=s.verSearch||t;if(_ instanceof Array||(_=[_]),-1!=a.indexOf(i)){r=t;for(let e of _){let t=o.indexOf(e);if(-1!=t){n=parseFloat(o.substring(t+e.length+1));break}}break}}for(let e in t){const r=t[e]||{};let n=r.str||m,a=r.search||e;if(-1!=n.indexOf(a)){s=e;break}}"Linux"==s&&-1!=m.indexOf("Windows NT")&&(s="HarmonyOS"),C={browser:r,version:n,OS:s}}o&&(C={browser:"ssr",version:0,OS:"ssr"})}(),p&&p.getUserMedia,"Chrome"===C.browser&&C.version>66||"Safari"===C.browser&&C.version>13||"OPR"===C.browser&&C.version>43||"Edge"===C.browser&&C.version,function(e){e[e.CRIT_ORIGINAL_IMAGE=1]="CRIT_ORIGINAL_IMAGE",e[e.CRIT_BARCODE=2]="CRIT_BARCODE",e[e.CRIT_TEXT_LINE=4]="CRIT_TEXT_LINE",e[e.CRIT_DETECTED_QUAD=8]="CRIT_DETECTED_QUAD",e[e.CRIT_DESKEWED_IMAGE=16]="CRIT_DESKEWED_IMAGE",e[e.CRIT_PARSED_RESULT=32]="CRIT_PARSED_RESULT",e[e.CRIT_ENHANCED_IMAGE=64]="CRIT_ENHANCED_IMAGE"}(y||(y={})),function(e){e[e.CT_NORMAL_INTERSECTED=0]="CT_NORMAL_INTERSECTED",e[e.CT_T_INTERSECTED=1]="CT_T_INTERSECTED",e[e.CT_CROSS_INTERSECTED=2]="CT_CROSS_INTERSECTED",e[e.CT_NOT_INTERSECTED=3]="CT_NOT_INTERSECTED"}(g||(g={})),function(e){e[e.EC_OK=0]="EC_OK",e[e.EC_UNKNOWN=-1e4]="EC_UNKNOWN",e[e.EC_NO_MEMORY=-10001]="EC_NO_MEMORY",e[e.EC_NULL_POINTER=-10002]="EC_NULL_POINTER",e[e.EC_LICENSE_INVALID=-10003]="EC_LICENSE_INVALID",e[e.EC_LICENSE_EXPIRED=-10004]="EC_LICENSE_EXPIRED",e[e.EC_FILE_NOT_FOUND=-10005]="EC_FILE_NOT_FOUND",e[e.EC_FILE_TYPE_NOT_SUPPORTED=-10006]="EC_FILE_TYPE_NOT_SUPPORTED",e[e.EC_BPP_NOT_SUPPORTED=-10007]="EC_BPP_NOT_SUPPORTED",e[e.EC_INDEX_INVALID=-10008]="EC_INDEX_INVALID",e[e.EC_CUSTOM_REGION_INVALID=-10010]="EC_CUSTOM_REGION_INVALID",e[e.EC_IMAGE_READ_FAILED=-10012]="EC_IMAGE_READ_FAILED",e[e.EC_TIFF_READ_FAILED=-10013]="EC_TIFF_READ_FAILED",e[e.EC_DIB_BUFFER_INVALID=-10018]="EC_DIB_BUFFER_INVALID",e[e.EC_PDF_READ_FAILED=-10021]="EC_PDF_READ_FAILED",e[e.EC_PDF_DLL_MISSING=-10022]="EC_PDF_DLL_MISSING",e[e.EC_PAGE_NUMBER_INVALID=-10023]="EC_PAGE_NUMBER_INVALID",e[e.EC_CUSTOM_SIZE_INVALID=-10024]="EC_CUSTOM_SIZE_INVALID",e[e.EC_TIMEOUT=-10026]="EC_TIMEOUT",e[e.EC_JSON_PARSE_FAILED=-10030]="EC_JSON_PARSE_FAILED",e[e.EC_JSON_TYPE_INVALID=-10031]="EC_JSON_TYPE_INVALID",e[e.EC_JSON_KEY_INVALID=-10032]="EC_JSON_KEY_INVALID",e[e.EC_JSON_VALUE_INVALID=-10033]="EC_JSON_VALUE_INVALID",e[e.EC_JSON_NAME_KEY_MISSING=-10034]="EC_JSON_NAME_KEY_MISSING",e[e.EC_JSON_NAME_VALUE_DUPLICATED=-10035]="EC_JSON_NAME_VALUE_DUPLICATED",e[e.EC_TEMPLATE_NAME_INVALID=-10036]="EC_TEMPLATE_NAME_INVALID",e[e.EC_JSON_NAME_REFERENCE_INVALID=-10037]="EC_JSON_NAME_REFERENCE_INVALID",e[e.EC_PARAMETER_VALUE_INVALID=-10038]="EC_PARAMETER_VALUE_INVALID",e[e.EC_DOMAIN_NOT_MATCH=-10039]="EC_DOMAIN_NOT_MATCH",e[e.EC_LICENSE_KEY_NOT_MATCH=-10043]="EC_LICENSE_KEY_NOT_MATCH",e[e.EC_SET_MODE_ARGUMENT_ERROR=-10051]="EC_SET_MODE_ARGUMENT_ERROR",e[e.EC_GET_MODE_ARGUMENT_ERROR=-10055]="EC_GET_MODE_ARGUMENT_ERROR",e[e.EC_IRT_LICENSE_INVALID=-10056]="EC_IRT_LICENSE_INVALID",e[e.EC_FILE_SAVE_FAILED=-10058]="EC_FILE_SAVE_FAILED",e[e.EC_STAGE_TYPE_INVALID=-10059]="EC_STAGE_TYPE_INVALID",e[e.EC_IMAGE_ORIENTATION_INVALID=-10060]="EC_IMAGE_ORIENTATION_INVALID",e[e.EC_CONVERT_COMPLEX_TEMPLATE_ERROR=-10061]="EC_CONVERT_COMPLEX_TEMPLATE_ERROR",e[e.EC_CALL_REJECTED_WHEN_CAPTURING=-10062]="EC_CALL_REJECTED_WHEN_CAPTURING",e[e.EC_NO_IMAGE_SOURCE=-10063]="EC_NO_IMAGE_SOURCE",e[e.EC_READ_DIRECTORY_FAILED=-10064]="EC_READ_DIRECTORY_FAILED",e[e.EC_MODULE_NOT_FOUND=-10065]="EC_MODULE_NOT_FOUND",e[e.EC_MULTI_PAGES_NOT_SUPPORTED=-10066]="EC_MULTI_PAGES_NOT_SUPPORTED",e[e.EC_FILE_ALREADY_EXISTS=-10067]="EC_FILE_ALREADY_EXISTS",e[e.EC_CREATE_FILE_FAILED=-10068]="EC_CREATE_FILE_FAILED",e[e.EC_IMGAE_DATA_INVALID=-10069]="EC_IMGAE_DATA_INVALID",e[e.EC_IMAGE_SIZE_NOT_MATCH=-10070]="EC_IMAGE_SIZE_NOT_MATCH",e[e.EC_IMAGE_PIXEL_FORMAT_NOT_MATCH=-10071]="EC_IMAGE_PIXEL_FORMAT_NOT_MATCH",e[e.EC_SECTION_LEVEL_RESULT_IRREPLACEABLE=-10072]="EC_SECTION_LEVEL_RESULT_IRREPLACEABLE",e[e.EC_AXIS_DEFINITION_INCORRECT=-10073]="EC_AXIS_DEFINITION_INCORRECT",e[e.EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE=-10074]="EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE",e[e.EC_PDF_LIBRARY_LOAD_FAILED=-10075]="EC_PDF_LIBRARY_LOAD_FAILED",e[e.EC_UNSUPPORTED_JSON_KEY_WARNING=-10077]="EC_UNSUPPORTED_JSON_KEY_WARNING",e[e.EC_MODEL_FILE_NOT_FOUND=-10078]="EC_MODEL_FILE_NOT_FOUND",e[e.EC_PDF_LICENSE_NOT_FOUND=-10079]="EC_PDF_LICENSE_NOT_FOUND",e[e.EC_RECT_INVALID=-10080]="EC_RECT_INVALID",e[e.EC_NO_LICENSE=-2e4]="EC_NO_LICENSE",e[e.EC_LICENSE_BUFFER_FAILED=-20002]="EC_LICENSE_BUFFER_FAILED",e[e.EC_LICENSE_SYNC_FAILED=-20003]="EC_LICENSE_SYNC_FAILED",e[e.EC_DEVICE_NOT_MATCH=-20004]="EC_DEVICE_NOT_MATCH",e[e.EC_BIND_DEVICE_FAILED=-20005]="EC_BIND_DEVICE_FAILED",e[e.EC_INSTANCE_COUNT_OVER_LIMIT=-20008]="EC_INSTANCE_COUNT_OVER_LIMIT",e[e.EC_TRIAL_LICENSE=-20010]="EC_TRIAL_LICENSE",e[e.EC_BARCODE_FORMAT_INVALID=-30009]="EC_BARCODE_FORMAT_INVALID",e[e.EC_CUSTOM_MODULESIZE_INVALID=-30025]="EC_CUSTOM_MODULESIZE_INVALID",e[e.EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT=-40101]="EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT",e[e.EC_TEXT_LINE_GROUP_REGEX_CONFLICT=-40102]="EC_TEXT_LINE_GROUP_REGEX_CONFLICT",e[e.EC_QUADRILATERAL_INVALID=-50057]="EC_QUADRILATERAL_INVALID",e[e.EC_PANORAMA_LICENSE_INVALID=-70060]="EC_PANORAMA_LICENSE_INVALID",e[e.EC_RESOURCE_PATH_NOT_EXIST=-90001]="EC_RESOURCE_PATH_NOT_EXIST",e[e.EC_RESOURCE_LOAD_FAILED=-90002]="EC_RESOURCE_LOAD_FAILED",e[e.EC_CODE_SPECIFICATION_NOT_FOUND=-90003]="EC_CODE_SPECIFICATION_NOT_FOUND",e[e.EC_FULL_CODE_EMPTY=-90004]="EC_FULL_CODE_EMPTY",e[e.EC_FULL_CODE_PREPROCESS_FAILED=-90005]="EC_FULL_CODE_PREPROCESS_FAILED",e[e.EC_LICENSE_WARNING=-10076]="EC_LICENSE_WARNING",e[e.EC_BARCODE_READER_LICENSE_NOT_FOUND=-30063]="EC_BARCODE_READER_LICENSE_NOT_FOUND",e[e.EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND=-40103]="EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND",e[e.EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND=-50058]="EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND",e[e.EC_CODE_PARSER_LICENSE_NOT_FOUND=-90012]="EC_CODE_PARSER_LICENSE_NOT_FOUND"}(h||(h={})),function(e){e[e.GEM_SKIP=0]="GEM_SKIP",e[e.GEM_AUTO=1]="GEM_AUTO",e[e.GEM_GENERAL=2]="GEM_GENERAL",e[e.GEM_GRAY_EQUALIZE=4]="GEM_GRAY_EQUALIZE",e[e.GEM_GRAY_SMOOTH=8]="GEM_GRAY_SMOOTH",e[e.GEM_SHARPEN_SMOOTH=16]="GEM_SHARPEN_SMOOTH",e[e.GEM_REV=-2147483648]="GEM_REV",e[e.GEM_END=-1]="GEM_END"}(A||(A={})),function(e){e[e.GTM_SKIP=0]="GTM_SKIP",e[e.GTM_INVERTED=1]="GTM_INVERTED",e[e.GTM_ORIGINAL=2]="GTM_ORIGINAL",e[e.GTM_AUTO=4]="GTM_AUTO",e[e.GTM_REV=-2147483648]="GTM_REV",e[e.GTM_END=-1]="GTM_END"}(N||(N={})),function(e){e[e.ITT_FILE_IMAGE=0]="ITT_FILE_IMAGE",e[e.ITT_VIDEO_FRAME=1]="ITT_VIDEO_FRAME"}(R||(R={})),function(e){e[e.PDFRM_VECTOR=1]="PDFRM_VECTOR",e[e.PDFRM_RASTER=2]="PDFRM_RASTER",e[e.PDFRM_REV=-2147483648]="PDFRM_REV"}(D||(D={})),function(e){e[e.RDS_RASTERIZED_PAGES=0]="RDS_RASTERIZED_PAGES",e[e.RDS_EXTRACTED_IMAGES=1]="RDS_EXTRACTED_IMAGES"}(O||(O={})),function(e){e[e.CVS_NOT_VERIFIED=0]="CVS_NOT_VERIFIED",e[e.CVS_PASSED=1]="CVS_PASSED",e[e.CVS_FAILED=2]="CVS_FAILED"}(S||(S={}));const b={IRUT_NULL:BigInt(0),IRUT_COLOUR_IMAGE:BigInt(1),IRUT_SCALED_COLOUR_IMAGE:BigInt(2),IRUT_GRAYSCALE_IMAGE:BigInt(4),IRUT_TRANSOFORMED_GRAYSCALE_IMAGE:BigInt(8),IRUT_ENHANCED_GRAYSCALE_IMAGE:BigInt(16),IRUT_PREDETECTED_REGIONS:BigInt(32),IRUT_BINARY_IMAGE:BigInt(64),IRUT_TEXTURE_DETECTION_RESULT:BigInt(128),IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE:BigInt(256),IRUT_TEXTURE_REMOVED_BINARY_IMAGE:BigInt(512),IRUT_CONTOURS:BigInt(1024),IRUT_LINE_SEGMENTS:BigInt(2048),IRUT_TEXT_ZONES:BigInt(4096),IRUT_TEXT_REMOVED_BINARY_IMAGE:BigInt(8192),IRUT_CANDIDATE_BARCODE_ZONES:BigInt(16384),IRUT_LOCALIZED_BARCODES:BigInt(32768),IRUT_SCALED_BARCODE_IMAGE:BigInt(65536),IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE:BigInt(1<<17),IRUT_COMPLEMENTED_BARCODE_IMAGE:BigInt(1<<18),IRUT_DECODED_BARCODES:BigInt(1<<19),IRUT_LONG_LINES:BigInt(1<<20),IRUT_CORNERS:BigInt(1<<21),IRUT_CANDIDATE_QUAD_EDGES:BigInt(1<<22),IRUT_DETECTED_QUADS:BigInt(1<<23),IRUT_LOCALIZED_TEXT_LINES:BigInt(1<<24),IRUT_RECOGNIZED_TEXT_LINES:BigInt(1<<25),IRUT_DESKEWED_IMAGE:BigInt(1<<26),IRUT_SHORT_LINES:BigInt(1<<27),IRUT_RAW_TEXT_LINES:BigInt(1<<28),IRUT_LOGIC_LINES:BigInt(1<<29),IRUT_ENHANCED_IMAGE:BigInt(Math.pow(2,30)),IRUT_ALL:BigInt("0xFFFFFFFFFFFFFFFF")};var v,L,w,U,M,P;!function(e){e[e.ROET_PREDETECTED_REGION=0]="ROET_PREDETECTED_REGION",e[e.ROET_LOCALIZED_BARCODE=1]="ROET_LOCALIZED_BARCODE",e[e.ROET_DECODED_BARCODE=2]="ROET_DECODED_BARCODE",e[e.ROET_LOCALIZED_TEXT_LINE=3]="ROET_LOCALIZED_TEXT_LINE",e[e.ROET_RECOGNIZED_TEXT_LINE=4]="ROET_RECOGNIZED_TEXT_LINE",e[e.ROET_DETECTED_QUAD=5]="ROET_DETECTED_QUAD",e[e.ROET_DESKEWED_IMAGE=6]="ROET_DESKEWED_IMAGE",e[e.ROET_SOURCE_IMAGE=7]="ROET_SOURCE_IMAGE",e[e.ROET_TARGET_ROI=8]="ROET_TARGET_ROI",e[e.ROET_ENHANCED_IMAGE=9]="ROET_ENHANCED_IMAGE"}(v||(v={})),function(e){e[e.ST_NULL=0]="ST_NULL",e[e.ST_REGION_PREDETECTION=1]="ST_REGION_PREDETECTION",e[e.ST_BARCODE_LOCALIZATION=2]="ST_BARCODE_LOCALIZATION",e[e.ST_BARCODE_DECODING=3]="ST_BARCODE_DECODING",e[e.ST_TEXT_LINE_LOCALIZATION=4]="ST_TEXT_LINE_LOCALIZATION",e[e.ST_TEXT_LINE_RECOGNITION=5]="ST_TEXT_LINE_RECOGNITION",e[e.ST_DOCUMENT_DETECTION=6]="ST_DOCUMENT_DETECTION",e[e.ST_DOCUMENT_DESKEWING=7]="ST_DOCUMENT_DESKEWING",e[e.ST_IMAGE_ENHANCEMENT=8]="ST_IMAGE_ENHANCEMENT"}(L||(L={})),function(e){e[e.IFF_JPEG=0]="IFF_JPEG",e[e.IFF_PNG=1]="IFF_PNG",e[e.IFF_BMP=2]="IFF_BMP",e[e.IFF_PDF=3]="IFF_PDF"}(w||(w={})),function(e){e[e.ICDM_NEAR=0]="ICDM_NEAR",e[e.ICDM_FAR=1]="ICDM_FAR"}(U||(U={})),function(e){e.MN_DYNAMSOFT_CAPTURE_VISION_ROUTER="cvr",e.MN_DYNAMSOFT_CORE="core",e.MN_DYNAMSOFT_LICENSE="license",e.MN_DYNAMSOFT_IMAGE_PROCESSING="dip",e.MN_DYNAMSOFT_UTILITY="utility",e.MN_DYNAMSOFT_BARCODE_READER="dbr",e.MN_DYNAMSOFT_DOCUMENT_NORMALIZER="ddn",e.MN_DYNAMSOFT_LABEL_RECOGNIZER="dlr",e.MN_DYNAMSOFT_CAPTURE_VISION_DATA="dcvData",e.MN_DYNAMSOFT_NEURAL_NETWORK="dnn",e.MN_DYNAMSOFT_CODE_PARSER="dcp",e.MN_DYNAMSOFT_CAMERA_ENHANCER="dce",e.MN_DYNAMSOFT_CAPTURE_VISION_STD="std"}(M||(M={})),function(e){e[e.TMT_LOCAL_TO_ORIGINAL_IMAGE=0]="TMT_LOCAL_TO_ORIGINAL_IMAGE",e[e.TMT_ORIGINAL_TO_LOCAL_IMAGE=1]="TMT_ORIGINAL_TO_LOCAL_IMAGE",e[e.TMT_LOCAL_TO_SECTION_IMAGE=2]="TMT_LOCAL_TO_SECTION_IMAGE",e[e.TMT_SECTION_TO_LOCAL_IMAGE=3]="TMT_SECTION_TO_LOCAL_IMAGE"}(P||(P={})),(e=>{if(null==e&&(e="./"),o||_);else{let t=document.createElement("a");t.href=e,e=t.href}e.endsWith("/")||(e+="/")})(c+"../../dynamsoft-capture-vision-std@2.0.0/dist/");const F="undefined"==typeof self,B=F?{}:self;let G,W,x,k,V;"undefined"!=typeof navigator&&(G=navigator,W=G.userAgent,x=G.platform,k=G.mediaDevices),function(){if(!F){const e={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:G.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:x,search:"Win"},Mac:{str:x},Linux:{str:x}};let r="unknownBrowser",n=0,s="unknownOS";for(let t in e){const s=e[t]||{};let a=s.str||W,i=s.search||t,o=s.verStr||W,_=s.verSearch||t;if(_ instanceof Array||(_=[_]),-1!=a.indexOf(i)){r=t;for(let e of _){let t=o.indexOf(e);if(-1!=t){n=parseFloat(o.substring(t+e.length+1));break}}break}}for(let e in t){const r=t[e]||{};let n=r.str||W,a=r.search||e;if(-1!=n.indexOf(a)){s=e;break}}"Linux"==s&&-1!=W.indexOf("Windows NT")&&(s="HarmonyOS"),V={browser:r,version:n,OS:s}}F&&(V={browser:"ssr",version:0,OS:"ssr"})}(),k&&k.getUserMedia;const Y="Chrome"===V.browser&&V.version>66||"Safari"===V.browser&&V.version>13||"OPR"===V.browser&&V.version>43||"Edge"===V.browser&&V.version>15;var H=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function J(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(s){if("TypeError"!==s.name)throw s;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function j(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function X(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function Z(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}function K(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}const $="local-forage-detect-blob-support";let z;const Q={},q=Object.prototype.toString,ee="readonly",te="readwrite";function re(e){return"boolean"==typeof z?Promise.resolve(z):function(e){return new Promise((function(t){var r=e.transaction($,te),n=J([""]);r.objectStore($).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return z=e,z}))}function ne(e){var t=Q[e.name],r={};r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function se(e){var t=Q[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function ae(e,t){var r=Q[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function ie(e,t){return new Promise((function(r,n){if(Q[e.name]=Q[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);ne(e),e.db.close()}var s=[e.name];t&&s.push(e.version);var a=H.open.apply(H,s);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore($)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},r(t),se(e)}}))}function oe(e){return ie(e,!1)}function _e(e){return ie(e,!0)}function ce(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,s=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),s||r){if(r){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function Ee(e){var t=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),s=0;s<t;s++)n[s]=e.charCodeAt(s);return r}(atob(e.data));return J([t],{type:e.type})}function le(e){var t=this,r=t._initReady().then((function(){var e=Q[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return X(r,e,e),r}function de(e,t,r,n){void 0===n&&(n=1);try{var s=e.db.transaction(e.storeName,t);r(null,s)}catch(s){if(n>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return Promise.resolve().then((()=>{if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_e(e)})).then((()=>function(e){ne(e);for(var t=Q[e.name],r=t.forages,n=0;n<r.length;n++){const e=r[n];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return e.db=null,oe(e).then((t=>(e.db=t,ce(e)?_e(e):t))).then((n=>{e.db=t.db=n;for(var s=0;s<r.length;s++)r[s]._dbInfo.db=n})).catch((t=>{throw ae(e,t),t}))}(e).then((function(){de(e,t,r,n-1)})))).catch(r);r(s)}}var ue={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var s=Q[r.name];s||(s={forages:[],db:null,dbReady:null,deferredOperations:[]},Q[r.name]=s),s.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=le);var a=[];function i(){return Promise.resolve()}for(var o=0;o<s.forages.length;o++){var _=s.forages[o];_!==t&&a.push(_._initReady().catch(i))}var c=s.forages.slice(0);return Promise.all(a).then((function(){return r.db=s.db,oe(r)})).then((function(e){return r.db=e,ce(r,t._defaultConfig.version)?_e(r):e})).then((function(e){r.db=s.db=e,t._dbInfo=r;for(var n=0;n<c.length;n++){var a=c[n];a!==t&&(a._dbInfo.db=r.db,a._dbInfo.version=r.version)}}))},_support:function(){try{if(!H||!H.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),getItem:function(e,t){var r=this;e=Z(e);var n=new Promise((function(t,n){r.ready().then((function(){de(r._dbInfo,ee,(function(s,a){if(s)return n(s);try{var i=a.objectStore(r._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),function(e){return e&&e.__local_forage_encoded_blob}(e)&&(e=Ee(e)),t(e)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return j(n,t),n},setItem:function(e,t,r){var n=this;e=Z(e);var s=new Promise((function(r,s){var a;n.ready().then((function(){return a=n._dbInfo,"[object Blob]"===q.call(t)?re(a.db).then((function(e){return e?t:(r=t,new Promise((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){de(n._dbInfo,te,(function(a,i){if(a)return s(a);try{var o=i.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var _=o.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),r(t)},i.onabort=i.onerror=function(){var e=_.error?_.error:_.transaction.error;s(e)}}catch(e){s(e)}}))})).catch(s)}));return j(s,r),s},removeItem:function(e,t){var r=this;e=Z(e);var n=new Promise((function(t,n){r.ready().then((function(){de(r._dbInfo,te,(function(s,a){if(s)return n(s);try{var i=a.objectStore(r._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){n(i.error)},a.onabort=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return j(n,t),n},clear:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){de(t._dbInfo,te,(function(n,s){if(n)return r(n);try{var a=s.objectStore(t._dbInfo.storeName).clear();s.oncomplete=function(){e()},s.onabort=s.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return j(r,e),r},length:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){de(t._dbInfo,ee,(function(n,s){if(n)return r(n);try{var a=s.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return j(r,e),r},keys:function(e){var t=this,r=new Promise((function(e,r){t.ready().then((function(){de(t._dbInfo,ee,(function(n,s){if(n)return r(n);try{var a=s.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];a.onsuccess=function(){var t=a.result;t?(i.push(t.key),t.continue()):e(i)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return j(r,e),r},dropInstance:function(e,t){t=K.apply(this,arguments);var r,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){const t=e.name===n.name&&this._dbInfo.db?Promise.resolve(this._dbInfo.db):oe(e).then((t=>{const r=Q[e.name],n=r.forages;r.db=t;for(var s=0;s<n.length;s++)n[s]._dbInfo.db=t;return t}));r=e.storeName?t.then((t=>{if(!t.objectStoreNames.contains(e.storeName))return;const r=t.version+1;ne(e);const n=Q[e.name],s=n.forages;t.close();for(let e=0;e<s.length;e++){const t=s[e];t._dbInfo.db=null,t._dbInfo.version=r}const a=new Promise(((t,n)=>{const s=H.open(e.name,r);s.onerror=e=>{s.result.close(),n(e)},s.onupgradeneeded=()=>{s.result.deleteObjectStore(e.storeName)},s.onsuccess=()=>{const e=s.result;e.close(),t(e)}}));return a.then((e=>{n.db=e;for(let t=0;t<s.length;t++){const r=s[t];r._dbInfo.db=e,se(r._dbInfo)}})).catch((t=>{throw(ae(e,t)||Promise.resolve()).catch((()=>{})),t}))})):t.then((t=>{ne(e);const r=Q[e.name],n=r.forages;t.close();for(var s=0;s<n.length;s++){n[s]._dbInfo.db=null}const a=new Promise(((t,r)=>{var n=H.deleteDatabase(e.name);n.onerror=()=>{const e=n.result;e&&e.close(),r(n.error)},n.onblocked=()=>{console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=()=>{const e=n.result;e&&e.close(),t(e)}}));return a.then((e=>{r.db=e;for(var t=0;t<n.length;t++){se(n[t]._dbInfo)}})).catch((t=>{throw(ae(e,t)||Promise.resolve()).catch((()=>{})),t}))}))}else r=Promise.reject("Invalid arguments");return j(r,t),r}};const Ie=new Map;function fe(e,t){let r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}var me={_driver:"tempStorageWrapper",_initStorage:async function(e){const t={};if(e)for(let r in e)t[r]=e[r];const r=t.keyPrefix=fe(e,this._defaultConfig);this._dbInfo=t,Ie.has(r)||Ie.set(r,new Map)},getItem:function(e,t){e=Z(e);const r=this.ready().then((()=>Ie.get(this._dbInfo.keyPrefix).get(e)));return j(r,t),r},setItem:function(e,t,r){e=Z(e);const n=this.ready().then((()=>(void 0===t&&(t=null),Ie.get(this._dbInfo.keyPrefix).set(e,t),t)));return j(n,r),n},removeItem:function(e,t){e=Z(e);const r=this.ready().then((()=>{Ie.get(this._dbInfo.keyPrefix).delete(e)}));return j(r,t),r},clear:function(e){const t=this.ready().then((()=>{const e=this._dbInfo.keyPrefix;Ie.has(e)&&Ie.delete(e)}));return j(t,e),t},length:function(e){const t=this.ready().then((()=>Ie.get(this._dbInfo.keyPrefix).size));return j(t,e),t},keys:function(e){const t=this.ready().then((()=>[...Ie.get(this._dbInfo.keyPrefix).keys()]));return j(t,e),t},dropInstance:function(e,t){if(t=K.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){const t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}let r;return r=e.name?new Promise((t=>{e.storeName?t(fe(e,this._defaultConfig)):t(`${e.name}/`)})).then((e=>{Ie.delete(e)})):Promise.reject("Invalid arguments"),j(r,t),r}};const Te=(e,t)=>{const r=e.length;let n=0;for(;n<r;){if((s=e[n])===(a=t)||"number"==typeof s&&"number"==typeof a&&isNaN(s)&&isNaN(a))return!0;n++}var s,a;return!1},pe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ce={},ye={},ge={INDEXEDDB:ue,TEMPSTORAGE:me},he=[ge.INDEXEDDB._driver,ge.TEMPSTORAGE._driver],Ae=["dropInstance"],Ne=["clear","getItem","keys","length","removeItem","setItem"].concat(Ae),Re={description:"",driver:he.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function De(e,t){e[t]=function(){const r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function Oe(){for(let e=1;e<arguments.length;e++){const t=arguments[e];if(t)for(let e in t)t.hasOwnProperty(e)&&(pe(t[e])?arguments[0][e]=t[e].slice():arguments[0][e]=t[e])}return arguments[0]}class Se{constructor(e){for(let e in ge)if(ge.hasOwnProperty(e)){const t=ge[e],r=t._driver;this[e]=r,Ce[r]||this.defineDriver(t)}this._defaultConfig=Oe({},Re),this._config=Oe({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((()=>{}))}config(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(let t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config}defineDriver(e,t,r){const n=new Promise((function(t,r){try{const n=e._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(s);const a=Ne.concat("_initStorage");for(let t=0,n=a.length;t<n;t++){const n=a[t];if((!Te(Ae,n)||e[n])&&"function"!=typeof e[n])return void r(s)}const i=function(){const t=function(e){return function(){const t=new Error(`Method ${e} is not implemented by the current driver`),r=Promise.reject(t);return j(r,arguments[arguments.length-1]),r}};for(let r=0,n=Ae.length;r<n;r++){const n=Ae[r];e[n]||(e[n]=t(n))}};i();const o=function(r){Ce[n]&&console.info(`Redefining LocalForage driver: ${n}`),Ce[n]=e,ye[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(o,r):o(!!e._support):o(!0)}catch(e){r(e)}}));return X(n,t,r),n}driver(){return this._driver||null}getDriver(e,t,r){const n=Ce[e]?Promise.resolve(Ce[e]):Promise.reject(new Error("Driver not found."));return X(n,t,r),n}ready(e){const t=this,r=t._driverSet.then((()=>(null===t._ready&&(t._ready=t._initDriver()),t._ready)));return X(r,e,e),r}setDriver(e,t,r){const n=this;pe(e)||(e=[e]);const s=this._getSupportedDrivers(e);function a(){n._config.driver=n.driver()}function i(e){return n._extend(e),a(),n._ready=n._initStorage(n._config),n._ready}const o=null!==this._driverSet?this._driverSet.catch((()=>Promise.resolve())):Promise.resolve();return this._driverSet=o.then((()=>{const e=s[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((e=>{n._driver=e._driver,a(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){let t=0;return function r(){for(;t<e.length;){let s=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(s).then(i).catch(r)}a();const s=new Error("No available storage method found.");return n._driverSet=Promise.reject(s),n._driverSet}()}}(s)}))})).catch((()=>{a();const e=new Error("No available storage method found.");return n._driverSet=Promise.reject(e),n._driverSet})),X(this._driverSet,t,r),this._driverSet}supports(e){return!!ye[e]}_extend(e){Oe(this,e)}_getSupportedDrivers(e){const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];this.supports(n)&&t.push(n)}return t}_wrapLibraryMethodsWithReady(){for(let e=0,t=Ne.length;e<t;e++)De(this,Ne[e])}createInstance(e){return new Se(e)}}var be=new Se;Date.prototype.kUtilFormat=function(e){const t={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(let r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("000"+t[r]).substr(("000"+t[r]).length-RegExp.$1.length)));return e};let ve,Le,we,Ue=e=>{let t,n,s,a,i,o,_,c,E,l,d,u,I,f,m,T,p,C,y,g,h=B.btoa,A=B.atob,N=e.bd,R=e.pd,D=e.vm,O=e.hs,S=e.dt,b=e.dm,v=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],L=!1,w=Promise.resolve(),U=e.log&&((...t)=>{try{e.log.apply(null,t)}catch(e){setTimeout((()=>{throw e}),0)}})||(()=>{}),M=N&&U||(()=>{}),P=e=>e.join(""),F={a:[80,88,27,82,145,164,199,211],b:[187,87,89,128,150,44,190,213],c:[89,51,74,53,99,72,82,118],d:[99,181,118,158,215,103,76,117],e:[99,51,86,105,100,71,120,108],f:[97,87,49,119,98,51,74,48,83,50,86,53],g:[81,85,86,84,76,85,100,68,84,81,32,32],h:[90,87,53,106,99,110,108,119,100,65,32,32],i:[90,71,86,106,99,110,108,119,100,65,32,32],j:[97,88,89,32],k:[29,83,122,137,5,180,157,114],l:[100,71,70,110,84,71,86,117,90,51,82,111]},G=()=>B[P(F.c)][P(F.e)][P(F.f)]("raw",new Uint8Array(F.a.concat(F.b,F.d,F.k)),P(F.g),!0,[P(F.h),P(F.i)]),W=async e=>{if(B[P(F.c)]&&B[P(F.c)][P(F.e)]&&B[P(F.c)][P(F.e)][P(F.f)]){let t=A(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);let n=r.subarray(0,12),s=r.subarray(n.length);g||(g=await G());let a=await B[P(F.c)][P(F.e)][P(F.i)]({name:P(F.g),[P(F.j)]:n,[P(F.l)]:128},g,s);return String.fromCharCode.apply(null,new Uint8Array(a))}},x=e=>A(A(e.replace(/\n/g,"+").replace(/\s/g,"=")).substring(1)),k=e=>h(String.fromCharCode(97+25*Math.random())+h(e)).replace(/\+/g,"\n").replace(/=/g," "),V=()=>{if(B.crypto){let e=new Uint8Array(36);B.crypto.getRandomValues(e);let t="";for(let r=0;r<36;++r){let n=e[r]%36;t+=n<10?n:String.fromCharCode(n+87)}return t}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};const H="Failed to connect to the Dynamsoft License Server: ",J=" Check your Internet connection or contact Dynamsoft Support (support@dynamsoft.com) to acquire an offline license.",j={dlsErrorAndCacheExpire:H+"The cached license has expired. Please get connected to the network as soon as possible or contact the site administrator for more information.",publicTrialNetworkTimeout:H+"network timed out."+J,networkTimeout:H+"network timed out. Check your Internet connection or contact the site administrator for more information.",publicTrialFailConnect:H+"network connection error."+J,failConnect:H+"network connection error. Check your Internet connection or contact the site administrator for more information.",checkLocalTime:"Your system date and time appear to have been changed, causing the license to fail. Please correct the system date and time, then try again.",idbTimeout:"Failed to open indexedDB: Timeout.",dlsOfflineLicenseExpired:"The DLS2 Offline license has expired. Please contact the site administrator for more information."};let X,Z,K,$,z=async()=>{if(X)return X;X=new r,await(async()=>{u||(u=be)})(),await Promise.race([(async()=>{let e=await u.createInstance({name:"dynamjssdkhello"});await e.setItem("dynamjssdkhello","available")})(),new Promise(((e,t)=>{setTimeout((()=>t(new Error(j.idbTimeout))),5e3)}))]),f=await u.createInstance({name:"dynamdlsinfo"}),m=h(h("v2")+String.fromCharCode(b.charCodeAt(b.length/2)+1)+h(b));try{let e=await f.getItem(m),t=null;self.indexedDB&&(t=await self.indexedDB.databases());let r=t&&t.some((e=>{if(e)return"dynamltsinfo"===e.name}));if(!e&&r){let t=await u.createInstance({name:"dynamltsinfo"});e=await t.getItem(m),e&&await f.setItem(m,e)}e&&([s,l]=JSON.parse(await x(e)))}catch(e){}try{null==s&&(s=V(),f.setItem(m,await k(JSON.stringify([s,null]))))}catch(e){}X.resolve()},Q=async()=>{T=h(String.fromCharCode(O.charCodeAt(0)+10)+h(R)+h(O)+D+h(""+S)),I=await u.createInstance({name:"dynamdlsuns"+h(h("v2"))+h(String.fromCharCode(O.charCodeAt(0)+10)+h(R)+h(O)+D+h(""+S))});try{n=await f.getItem(T)}catch(e){}P=e=>A(String.fromCharCode.apply(null,e).replace(/\n/g,"+").replace(/\s/g,"="))},q=async e=>{if(K=Date.now(),Z)return Z;Z=new r;try{let r={pd:R,vm:D,v:t,dt:S||"browser",ed:"javascript",cu:s,ad:b,os:a,fn:i};c&&(r.rmk=c),O&&(-1!=O.indexOf("-")?r.hs=O:r.og=O);let d={};if(l){let e=await f.getItem(m);e&&([s,l]=JSON.parse(await x(e))),d["lts-time"]=l}_&&(r.sp=_);let u=await Promise.race([(async()=>{let t,a=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");l&&(f.setItem(m,await k(JSON.stringify([s,a]))),l=a);let i="auth/?ext="+encodeURIComponent(h(JSON.stringify(r)));E&&(i+="&"+encodeURIComponent(E));let _,c=!1,u=!1,I=async e=>{if(e&&!e.ok)try{let t=await e.text();if(t){let e=JSON.parse(t);e.errorCode&&(_=e,e.errorCode>100&&e.errorCode<200&&(n=null,c=!0,u=!0))}}catch(e){}};try{t=await Promise.race([fetch(v[0]+i,{headers:d,cache:e?"reload":"default",mode:"cors"}),new Promise(((e,t)=>setTimeout(t,1e4)))]),await I(t)}catch(e){}if(!(n||t&&t.ok||c))try{t=await Promise.race([fetch(v[1]+i,{headers:d,mode:"cors"}),new Promise(((e,t)=>setTimeout(t,3e4)))]),await I(t)}catch(e){}if(!(n||t&&t.ok||c))try{t=await Promise.race([fetch(v[0]+i,{headers:d,mode:"cors"}),new Promise(((e,t)=>setTimeout(t,3e4)))]),await I(t)}catch(e){}_&&151==_.errorCode&&(f.removeItem(m),f.removeItem(T),s=V(),r.cu=s,l=void 0,i="auth/?ext="+encodeURIComponent(h(JSON.stringify(r))),t=await Promise.race([fetch(v[0]+i,{headers:d,mode:"cors"}),new Promise(((e,t)=>setTimeout(t,3e4)))]),await I(t)),(()=>{if(!t||!t.ok){let e;u&&f.setItem(T,""),_?111==_.errorCode?e=_.message:(e=_.message.trim(),e.endsWith(".")||(e+="."),e=o?`An error occurred during authorization: ${e} [Contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.`:`An error occurred during authorization: ${e} Contact the site administrator for more information.`):e=o?j.publicTrialFailConnect:j.failConnect;let t=Error(e);throw _&&_.errorCode&&(t.ltsErrorCode=_.errorCode),t}})();let p=await t.text();try{l||(f.setItem(m,await k(JSON.stringify([s,a]))),l=a),f.setItem(T,p)}catch(e){}return p})(),new Promise(((e,t)=>{let r;r=o?j.publicTrialNetworkTimeout:j.networkTimeout,setTimeout((()=>t(new Error(r))),n?3e3:15e3)}))]);n=u}catch(e){N&&console.error(e),d=e}Z.resolve(),Z=null},ee=async()=>{$||($=(async()=>{if(M(s),!n){if(!L)throw U(d.message),d;return}let e={dm:b};N&&(e.bd=!0),e.brtk=!0,e.ls=v[0],O&&(-1!=O.indexOf("-")?e.hs=O:e.og=O),e.cu=s,i&&(e.fn=i),R&&(e.pd=R),t&&(e.v=t),S&&(e.dt=S),a&&(e.os=a),c&&(e.rmk=c),M(n);try{let t=JSON.parse(await W(n));t.pv&&(e.pv=JSON.stringify(t.pv)),t.ba&&(e.ba=t.ba),t.usu&&(e.usu=t.usu),t.trial&&(e.trial=t.trial),t.its&&(e.its=t.its),1==e.trial&&t.msg?e.msg=t.msg:d?e.msg=d.message||d:t.msg&&(e.msg=t.msg),e.ar=t.in,e.bafc=!!d}catch(e){}M(e);try{await p(e)}catch(e){M("error updl")}await te(),L||(L=!0),$=null})()),await $},te=async()=>{let e=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),t=await y();if(M(t),t&&t<e)throw d?new Error(j.dlsErrorAndCacheExpire):new Error(j.checkLocalTime)};const re=new r;let ne=null,se=async(e,t)=>(w=w.then((async()=>{try{let r=await I.keys();if(t||(re.isFulfilled?e&&(r=r.filter((t=>t<e))):e&&r.includes(e)?r=[e]:(r=[],M("Unexpected null key"))),!r.length)return;for(let e=0;e<r.length/1e3;++e){let t=r.slice(1e3*e,1e3*(e+1)),n=[];for(let e=0;e<t.length;++e)n.push(await I.getItem(t[e]));l=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");{let e=await f.getItem(m);e&&([s]=JSON.parse(await x(e))),f.setItem(m,await k(JSON.stringify([s,l])))}try{let e,r,s=v[0]+"verify/v2";l&&(s+="?ltstime="+encodeURIComponent(l));try{e=fetch(s,{method:"POST",body:n.join(";"),keepalive:!0})}finally{!re.isFulfilled&&Y&&re.resolve()}try{r=await e}finally{re.isFulfilled||re.resolve()}if(!r.ok)throw new Error("verify failed. Status Code: "+r.status);for(let e=0;e<t.length;++e)await I.removeItem(t[e])}catch(e){throw re.isFulfilled||re.resolve(),e}}}catch(e){}})),await w);return{i:async e=>{R=e.pd,t=e.v,D=t.split(".")[0],e.dt&&(S=e.dt),O=e.l||"",a="string"!=typeof e.os?JSON.stringify(e.os):e.os,i=e.fn,"string"==typeof i&&(i=i.substring(0,255)),e.ls&&e.ls.length&&(v=e.ls,1==v.length&&v.push(v[0])),o=!O||"200001"===O||O.startsWith("200001-"),_=e.sp,c=e.rmk,"string"==typeof c&&(c=c.substring(0,255)),e.cv&&(E=""+e.cv),p=e.updl,C=e.mnet,y=e.mxet,await z(),await Q(),await q(),await ee(),(!d||d.ltsErrorCode>=102&&d.ltsErrorCode<=120)&&se(null,!0)},i2:async({updl:e,mxet:t,strDLC2:r})=>{p=e,y=t,await z(),P=e=>A(String.fromCharCode.apply(null,e).replace(/\n/g,"+").replace(/\s/g,"="));let a={pk:r,dm:b};N&&(a.bd=!0),a.cu=s;try{n=r.substring(4);let e=JSON.parse(await W(n));e.pv&&(a.pv=JSON.stringify(e.pv)),e.ba&&(a.ba=e.ba),a.ar=e.in}catch(e){}M(a);try{await p(a)}catch(e){M("error updl")}let i=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),o=await y();if(o&&o<i)throw new Error(j.dlsOfflineLicenseExpired)},ih:Q,c:async()=>{let e=new Date;if(e.getTime()<K+36e4)return;let t=e.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),r=await C(),n=await y();if(n&&n<t)await q(!0),await ee();else if(r&&r<t){let t=new Date(e.getTime());t.setMinutes(e.getMinutes()-6);let r=t.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");l<r&&q().then((()=>ee()))}},s:async(e,t,r,n)=>{try{let e=(t=t.trim()).startsWith("{")&&t.endsWith("}")?await(async e=>{if(B[P(F.c)]&&B[P(F.c)][P(F.e)]&&B[P(F.c)][P(F.e)][P(F.f)]){let t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);let r=B.crypto.getRandomValues(new Uint8Array(12));g||(g=await G());let n=await B[P(F.c)][P(F.e)][P(F.h)]({name:P(F.g),[P(F.j)]:r,[P(F.l)]:128},g,t),s=new Uint8Array(n),a=new Uint8Array(r.length+s.length);return a.set(r),a.set(s,r.length),h(String.fromCharCode.apply(null,a))}})(t):t;e?(M("bs "+r),await I.setItem(r,e),M("ss "+r)):M("ept ecpt")}catch(e){}n&&(M("bd "+r),await se(r,2==n),M("sd "+r)),ne&&clearTimeout(ne),ne=setTimeout((async()=>{await se()}),36e4)},p:re,u:async()=>(await z(),s),ar:()=>n,pt:()=>o,ae:()=>d}};const Me=self,Pe={};Me.coreWorkerVersion="3.0.3000",Me.versions=Pe;const Fe={},Be=Me.waitAsyncDependency=async e=>{let t="string"==typeof e?[e]:e,n=[];for(let e of t)n.push(Fe[e]=Fe[e]||new r);await Promise.all(n)},Ge=async(e,t)=>{let n,s="string"==typeof e?[e]:e,a=[];for(let e of s){let s;a.push(s=Fe[e]=Fe[e]||new r(n=n||t())),s.isEmpty&&(s.task=n=n||t())}await Promise.all(a)},We=[];Me.setBufferIntoWasm=(e,t=0,r=0,n=0)=>{r&&(e=n?e.subarray(r,n):e.subarray(r));let s=We[t]=We[t]||{ptr:0,size:0,maxSize:0};return e.length>s.maxSize&&(s.ptr&&Ye._free(s.ptr),s.ptr=Ye._malloc(e.length),s.maxSize=e.length),Ye.HEAPU8.set(e,s.ptr),s.size=e.length,s.ptr};const xe={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(xe.needed){for(let e=0;e<xe.temps.length;e++)Ye._free(xe.temps[e]);xe.temps.length=0,Ye._free(xe.buffer),xe.buffer=0,xe.size+=xe.needed,xe.needed=0}xe.buffer||(xe.size+=128,xe.buffer=Ye._malloc(xe.size),assert(xe.buffer)),xe.pos=0},alloc:function(e,t){assert(xe.buffer);let r,n=t.BYTES_PER_ELEMENT,s=e.length*n;return s=s+7&-8,xe.pos+s>=xe.size?(assert(s>0),xe.needed+=s,r=Ye._malloc(s),xe.temps.push(r)):(r=xe.buffer+xe.pos,xe.pos+=s),r},copy:function(e,t,r){switch(r>>>=0,t.BYTES_PER_ELEMENT){case 2:r>>>=1;break;case 4:r>>>=2;break;case 8:r>>>=3}for(let n=0;n<e.length;n++)t[r+n]=e[n]}},ke=Me.ep=xe.prepare;Me.bDebug=!1,Me.bLog=!1,Me.strDomain=void 0;const Ve=Me.es=e=>{let t=intArrayFromString(e),r=xe.alloc(t,Ye.HEAP8);return xe.copy(t,Ye.HEAP8,r),r},Ye=Me.Module={print:e=>{Me.bLog&&$e(e)},printErr:e=>{Me.bLog&&$e(e)},locateFile:(e,t)=>{if(["dynamsoft-capture-vision-std.wasm","dynamsoft-core.wasm"].includes(e)){return He[e.split(".")[0].split("-").at(-1)]+e}return["dynamsoft-capture-vision-bundle.wasm"].includes(e)?He.dcvBundle+"dynamsoft-capture-vision-bundle.wasm":["dynamsoft-capture-vision-bundle-simd.wasm"].includes(e)?He.dcvBundle+"dynamsoft-capture-vision-bundle-simd.wasm":e}},He=Me.engineResourcePaths={},Je=Me.loadCore=async()=>{const e="core";await Ge(e,(async()=>{let t=Me.bLog&&($e(e+" loading..."),Date.now())||0,r=new Promise((r=>{Ye.onRuntimeInitialized=()=>{ve=wasmExports,Me.bLog&&$e(e+" initialized, cost "+(Date.now()-t)+" ms"),r(void 0)}}));const n=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))();let s=He.dcvBundle+`dynamsoft-capture-vision-bundle${n&&we?"-simd":""}.js`;importScripts(s),await r}));{let e=[];"DCV"===Le?e=["CVR","LICENSE","UTILITY","DIP","DBR","DLR","DDN","DCP"]:"DBR"===Le&&(e=["CVR","LICENSE","UTILITY","DIP","DBR"]);for(let t of e)ke(),ve.emscripten_bind_CoreWasm_PreSetModuleExist(Ve(t)),ke(),ve.emscripten_bind_CvrWasm_SetModuleExist(Ve(t),!0);const t=JSON.parse(UTF8ToString(ve.emscripten_bind_CoreWasm_GetModuleVersion_0()));for(let e in t){const r=e.toLowerCase(),n=Me[`${r}WorkerVersion`];Pe[r]={worker:`${n||"No Worker"}`,wasm:t[e]}}}},je=Me.loadSideModule=async(e,{js:t,wasm:r})=>{await Ge(e,(async()=>{await Be("core")}))},Xe=Me.mapController={loadWasm:async(e,t)=>{try{Object.assign(He,e.engineResourcePaths),we=e._useSimd,e.needLoadCore&&(e.bLog&&(Me.bLog=!0),e.dm&&(Me.strDomain=e.dm),e.bd&&(Me.bDebug=!0),Le=e._bundleEnv,await Je());for(let t of e.names)await je(t,e.autoResources[t]);Ze(t,{versions:Pe})}catch(e){Ke(t,e)}},setBLog:e=>{Me.bLog=e.value},setBDebug:e=>{Me.bDebug=e.value},getModuleVersion:async(e,t)=>{try{let e=UTF8ToString(ve.emscripten_bind_CoreWasm_GetModuleVersion_0());Ze(t,{versions:JSON.parse(e)})}catch(e){Ke(t,e)}},cfd:async(e,t)=>{try{ve.emscripten_bind_CoreWasm_static_CFD_1(e.count),Ze(t,{})}catch(e){Ke(t,e)}}};addEventListener("message",(e=>{const t=e.data?e.data:e,r=t.body,n=t.id,s=t.instanceID,a=Xe[t.type];if(!a)throw new Error("Unmatched task: "+t.type);a(r,n,s)}));const Ze=Me.handleTaskRes=(e,t)=>{postMessage({type:"task",id:e,body:{success:!0,...t}})},Ke=Me.handleTaskErr=(e,t)=>{t||(t={}),postMessage({type:"task",id:e,body:{success:!1,message:t.message||"No error message available.",stack:Me.bDebug&&t.stack||"No stack trace available."}})},$e=Me.log=e=>{postMessage({type:"log",message:e})};let ze,Qe,qe,et=null,tt=new Set;self.cvrWorkerVersion="3.0.3000";const rt={},nt=async(e,t)=>(rt[e]||(rt[e]=(async()=>{try{let r=0,n=`${t}${e}.data`;const s=await new Promise(((s,a)=>{const i=new XMLHttpRequest;i.responseType="arraybuffer",i.onload=()=>{i.status<200||i.status>=300?s({ok:!1,status:i.status}):s({ok:!0,arrayBuffer:()=>i.response})},i.onerror=i.onabort=()=>{a({ok:!1,status:i.status})},i.onloadstart=()=>{postMessage({type:"event",id:-2,body:{loaded:0,total:r||0,tag:"starting",resourcesPath:t+e+".data"}})},i.onloadend=()=>{postMessage({type:"event",id:-2,body:{loaded:r||0,total:r||0,tag:"completed",resourcesPath:t+e+".data"}})};let o=Date.now();i.onprogress=e=>{if(e.lengthComputable&&(r=e.total),r){const t=Date.now();o+500<t&&(postMessage({type:"event",id:-2,body:{total:r,loaded:e.loaded,tag:"in progress",resourcesPath:n}}),o=t)}},i.open("GET",n,!0),i.send()}));if(!s.ok)throw new Error(`Network error. ${n} Status: ${s.status}.`);const a=await s.arrayBuffer(),i=new Uint8Array(a);ke();return UTF8ToString(ve.emscripten_bind_CvrWasm_AppendModelBuffer_4(Ve(e),setBufferIntoWasm(i,0),i.length,1))}catch(t){throw delete rt[e],new Error(t)}})()),rt[e]),st=async(e,t)=>{ke();const r=JSON.parse(UTF8ToString(ve.emscripten_bind_CvrWasm_ParseRequiredResources_1(e,Ve(t.templateName))));for(let e=0;e<r.models.length;e++)await nt(r.models[e],He.dcvData+"models/");for(let e=0;e<r.specss.length;e++)await pt(r.specss[e],He.dcvData+"parser-resources/")},at=async(e,t)=>{ke();UTF8ToString(ve.emscripten_bind_CvrWasm_ContainsTask_1(e,Ve(t.templateName))).includes("dlr")&&(await ft("confusable","ConfusableChars",t.engineResourcePaths.dcvData+"char-resources/"),await ft("overlapping","OverlappingChars",t.engineResourcePaths.dcvData+"char-resources/"))};function it(e,t){for(let r of e)if(r.result){if([b.IRUT_BINARY_IMAGE,b.IRUT_COLOUR_IMAGE,b.IRUT_COMPLEMENTED_BARCODE_IMAGE,b.IRUT_ENHANCED_GRAYSCALE_IMAGE,b.IRUT_GRAYSCALE_IMAGE,b.IRUT_SCALED_COLOUR_IMAGE,b.IRUT_SCALED_BARCODE_IMAGE,b.IRUT_TEXTURE_REMOVED_BINARY_IMAGE,b.IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE,b.IRUT_TEXT_REMOVED_BINARY_IMAGE,b.IRUT_TRANSOFORMED_GRAYSCALE_IMAGE].includes(BigInt(r.result.unitType))){let e=r.result.imageData.bytes;e&&(e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length)),r.result.imageData.bytes=e)}else if([b.IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE].includes(BigInt(r.result.unitType))){let e=r.result.deformationResistedBarcode.imageData.bytes;e&&(e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length)),r.result.deformationResistedBarcode.imageData.bytes=e)}else if([b.IRUT_ENHANCED_IMAGE].includes(r.result.unitType)){let e=r.result.enhancedImage.imageData.bytes;e&&(e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length)),r.result.enhancedImage.imageData.bytes=e)}else if([b.IRUT_CONTOURS].includes(BigInt(r.result.unitType))){let e=r.result.contours,n=r.result.contoursOffset;if(e&&n){e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length)),n=new Uint8Array(new Uint8Array(t.buffer,n.ptr,n.length));const s=new DataView(e.buffer),a=[];for(let t=0;t<e.length;t+=4)a.push(s.getInt32(t,!0));const i=new DataView(n.buffer),o=[0];for(let e=0;e<n.length;e+=4)o.push(i.getInt32(e,!0));const _=[];for(let e=0;e<o.length-1;e++){const t={points:[]};for(let r=o[e];r<o[e+1]-1;r+=2)t.points.push({x:a[r],y:a[r+1]});_.push(t)}r.result.contours=_,delete r.result.contoursOffset}}else if([b.IRUT_LINE_SEGMENTS].includes(BigInt(r.result.unitType))){let e=r.result.lineSegments;if(e){e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length));const n=new DataView(e.buffer),s=[];for(let t=0;t<e.length;t+=4)s.push(n.getInt32(t,!0));const a=[];for(let e=0;e<s.length;e+=4){const t={startPoint:{x:s[e],y:s[e+1]},endPoint:{x:s[e+2],y:s[e+3]}};a.push(t)}r.result.lineSegments=a}}else if([b.IRUT_LOGIC_LINES].includes(BigInt(r.result.unitType))){let e=r.result.logicLines;if(e){e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length));const n=new DataView(e.buffer),s=[];for(let t=0;t<e.length;t+=4)s.push(n.getInt32(t,!0));const a=[];for(let e=0;e<s.length;e+=4){const t={startPoint:{x:s[e],y:s[e+1]},endPoint:{x:s[e+2],y:s[e+3]}};a.push(t)}r.result.logicLines=a}}else if([b.IRUT_SHORT_LINES].includes(BigInt(r.result.unitType))){let e=r.result.shortLines;if(e){e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length));const n=new DataView(e.buffer),s=[];for(let t=0;t<e.length;t+=4)s.push(n.getInt32(t,!0));const a=[];for(let e=0;e<s.length;e+=4){const t={startPoint:{x:s[e],y:s[e+1]},endPoint:{x:s[e+2],y:s[e+3]}};a.push(t)}r.result.shortLines=a}}else if([b.IRUT_CANDIDATE_QUAD_EDGES].includes(BigInt(r.result.unitType))){let e=r.result.candidateQuadEdges;if(e){e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length));const n=new DataView(e.buffer),s=[];for(let t=0;t<e.length;t+=4)s.push(n.getInt32(t,!0));const a=[];for(let e=0;e<s.length;e+=22){const t={startCorner:{intersection:{x:s[e],y:s[e+1]},line1:{startPoint:{x:s[e+2],y:s[e+3]},endPoint:{x:s[e+4],y:s[e+5]}},line2:{startPoint:{x:s[e+6],y:s[e+7]},endPoint:{x:s[e+8],y:s[e+9]}},type:s[e+10]},endCorner:{intersection:{x:s[e+11],y:s[e+12]},line1:{startPoint:{x:s[e+13],y:s[e+14]},endPoint:{x:s[e+15],y:s[e+16]}},line2:{startPoint:{x:s[e+17],y:s[e+18]},endPoint:{x:s[e+19],y:s[e+20]}},type:s[e+21]}};a.push(t)}r.result.candidateQuadEdges=a}}else if([b.IRUT_CORNERS].includes(BigInt(r.result.unitType))){let e=r.result.corners;if(e){e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length));const n=new DataView(e.buffer),s=[];for(let t=0;t<e.length;t+=4)s.push(n.getInt32(t,!0));const a=[];for(let e=0;e<s.length;e+=11){const t={intersection:{x:s[e],y:s[e+1]},line1:{startPoint:{x:s[e+2],y:s[e+3]},endPoint:{x:s[e+4],y:s[e+5]}},line2:{startPoint:{x:s[e+6],y:s[e+7]},endPoint:{x:s[e+8],y:s[e+9]}},type:s[e+10]};a.push(t)}r.result.corners=a}}else if([b.IRUT_DESKEWED_IMAGE].includes(BigInt(r.result.unitType))){let e=r.result.deskewedImage.imageData.bytes;e&&(e=new Uint8Array(new Uint8Array(t.buffer,e.ptr,e.length)),r.result.deskewedImage.imageData.bytes=e)}}else if(r.intermediateResultUnits)for(let e of r.intermediateResultUnits)if(e.unitType===b.IRUT_DESKEWED_IMAGE){let r=e.deskewedImage.imageData.bytes;r&&(r=new Uint8Array(new Uint8Array(t.buffer,r.ptr,r.length)),e.deskewedImage.imageData.bytes=r)}}let ot,_t,ct,Et;Object.assign(Xe,{cvr_createInstance:async(e,t)=>{try{let r=ve.emscripten_bind_CvrWasm_CvrWasm_0();e.loadPresetTemplates&&(He.dbr&&(ze=await I(He.dcvData+"templates/DBR-PresetTemplates.json","text"),ke(),ve.emscripten_bind_CvrWasm_AppendParameterContent_1(r,Ve(ze))),He.dlr&&(Qe=await I(He.dcvData+"templates/DLR-PresetTemplates.json","text"),ke(),ve.emscripten_bind_CvrWasm_AppendParameterContent_1(r,Ve(Qe))),He.ddn&&(qe=await I(He.dcvData+"templates/DDN-PresetTemplates.json","text"),ke(),ve.emscripten_bind_CvrWasm_AppendParameterContent_1(r,Ve(qe))),ve.emscripten_bind_CvrWasm_InitParameter_0(r)),ke();const n=UTF8ToString(ve.emscripten_bind_CvrWasm_OutputSettings_1(r,Ve("*"),!1));let s=JSON.parse(UTF8ToString(ve.emscripten_bind_CoreWasm_GetModuleVersion_0())).CVR;tt.add(r),Ze(t,{instanceID:r,version:s,outputSettings:n})}catch(e){Ke(t,e)}},cvr_appendModelBuffer:async(e,t)=>{let r;try{r=await nt(e.modelName,e.path),Ze(t,{success:!0,response:r})}catch(e){Ke(t,e)}},cvr_initSettings:async(e,t,r)=>{let n;try{const s=e.settings;ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_InitSettings_1(r,Ve(s))),Ze(t,{success:!0,response:n})}catch(e){Ke(t,e)}},cvr_setCrrRegistry:async(e,t,r)=>{try{tt.has(r)&&(ke(),ve.emscripten_bind_CvrWasm_SetCrrRegistry_1(r,Ve(e.receiver))),Ze(t,{success:!0})}catch(e){Ke(t,e)}},cvr_startCapturing:async(e,t,r)=>{let n=!1;try{await at(r,e),ke();const s=JSON.parse(UTF8ToString(ve.emscripten_bind_CvrWasm_OutputSettings_1(r,Ve(e.templateName))));if(s&&0!==s.errorCode)throw new Error(s.errorString);n=1===JSON.parse(s.data).CaptureVisionTemplates[0].OutputOriginalImage,await st(r,e),Ze(t,{success:!0,isOutputOriginalImage:n})}catch(e){Ke(t,e)}},cvr_parseRequiredResources:async(e,t,r)=>{let n;try{ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_ParseRequiredResources_1(r,Ve(e.templateName))),Ze(t,{success:!0,resources:n})}catch(e){Ke(t,e)}},cvr_clearVerifyList:(e,t,r)=>{try{ve.emscripten_bind_CvrWasm_ClearVerifyList_0(r),Ze(t,{success:!0})}catch(e){Ke(t,e)}},cvr_getIntermediateResult:(e,t,r)=>{let n={};try{n=JSON.parse(UTF8ToString(ve.emscripten_bind_CvrWasm_GetIntermediateResult_0(r)),((e,t)=>["format","possibleFormats","unitType"].includes(e)?BigInt(t):t)),n&&it(n,HEAP8)}catch(e){Ke(t,e)}Ze(t,{success:!0,result:n})},cvr_setObservedResultUnitTypes:(e,t,r)=>{try{ke(),ve.emscripten_bind_CvrWasm_SetObservedResultUnitTypes_1(r,Ve(e.types))}catch(e){Ke(t,e)}Ze(t,{success:!0})},cvr_getObservedResultUnitTypes:(e,t,r)=>{let n;try{ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_GetObservedResultUnitTypes_0(r))}catch(e){Ke(t,e)}Ze(t,{success:!0,result:n})},cvr_isResultUnitTypeObserved:(e,t,r)=>{let n;try{ke(),n=ve.emscripten_bind_CvrWasm_IsResultUnitTypeObserved_1(r,Ve(e.type))}catch(e){Ke(t,e)}Ze(t,{success:!0,result:n})},cvr_capture:async(e,t,r)=>{let n,s,a;await checkAndReauth(),$e(`time worker get msg: ${Date.now()}`);try{let t=Date.now();await st(r,e),await at(r,e),$e("appendResourceTime: "+(Date.now()-t)),et&&(ve.emscripten_bind_Destory_CImageData(et),et=null),et=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0);let i=Date.now();$e(`start worker capture: ${i}`),ke(),s=UTF8ToString(ve.emscripten_bind_CvrWasm_Capture_4(r,et,Ve(e.templateName),e.isScanner,e.dynamsoft));let o=Date.now();$e("worker time: "+(o-i)),$e(`end worker capture: ${o}`),s=JSON.parse(s,(function(e,t){return"format"!==e||d(this)?t:BigInt(t)}));let _=Date.now();$e("capture result parsed: "+(_-o));for(let e=0;e<s.items.length;e++)[y.CRIT_DESKEWED_IMAGE,y.CRIT_ENHANCED_IMAGE].includes(s.items[e].type)&&(a=s.items[e].imageData.bytes,a=new Uint8Array(new Uint8Array(HEAP8.buffer,a.ptr,a.length)),s.items[e].imageData.bytes=a);const c=s.processedDocumentResult&&s.processedDocumentResult.deskewedImageResultItems;if(c)for(let e=0;e<c.length;e++)a=c[e].imageData.bytes,a=new Uint8Array(new Uint8Array(HEAP8.buffer,a.ptr,a.length)),c[e].imageData.bytes=a;const E=s.processedDocumentResult&&s.processedDocumentResult.enhancedImageResultItems;if(E)for(let e=0;e<E.length;e++)a=E[e].imageData.bytes,a=new Uint8Array(new Uint8Array(HEAP8.buffer,a.ptr,a.length)),E[e].imageData.bytes=a;let l=Date.now();$e("result new Uint8Array: "+(l-_)),n=JSON.parse(UTF8ToString(ve.emscripten_bind_CvrWasm_GetIntermediateResult_0(r)),((e,t)=>["format","possibleFormats","unitType"].includes(e)?BigInt(t):t)),n&&it(n,HEAP8),s.intermediateResult=n;let u=Date.now();$e("get intermediate result: "+(u-l)),$e("after capture handle time: "+(Date.now()-o))}catch(e){return void Ke(t,e)}const i=Date.now();$e(`time worker return msg: ${i}`),postMessage({type:"task",id:t,body:{success:!0,bytes:e.bytes,captureResult:s,workerReturnMsgTime:i}},[e.bytes.buffer])},cvr_outputSettings:async(e,t,r)=>{let n;try{ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_OutputSettings_1(r,Ve(e.templateName),e.includeDefaultValues)),Ze(t,{success:!0,response:n})}catch(e){Ke(t,e)}},cvr_getTemplateNames:async(e,t,r)=>{let n;try{ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_GetTemplateNames_0(r)),Ze(t,{success:!0,response:n})}catch(e){Ke(t,e)}},cvr_getSimplifiedSettings:async(e,t,r)=>{let n;try{ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_GetSimplifiedSettings_1(r,Ve(e.templateName))),Ze(t,{success:!0,response:n})}catch(e){Ke(t,e)}},cvr_updateSettings:async(e,t,r)=>{let n,s=!1;try{let a=e.settings,i=e.templateName;"object"==typeof a&&a.hasOwnProperty("barcodeSettings")&&(a.barcodeSettings.barcodeFormatIds=a.barcodeSettings.barcodeFormatIds.toString()),ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_UpdateSettings_2(r,Ve(i),Ve(JSON.stringify(a)))),ke();const o=JSON.parse(UTF8ToString(ve.emscripten_bind_CvrWasm_OutputSettings_1(r,Ve(i))));if(!o.errorCode){s=1===JSON.parse(o.data).CaptureVisionTemplates[0].OutputOriginalImage}Ze(t,{success:!0,response:n,isOutputOriginalImage:s})}catch(e){Ke(t,e)}},cvr_resetSettings:async(e,t,r)=>{let n;try{ve.emscripten_bind_CvrWasm_ResetSettings_0(r),ke(),ze&&ve.emscripten_bind_CvrWasm_AppendParameterContent_1(r,Ve(ze)),ke(),Qe&&ve.emscripten_bind_CvrWasm_AppendParameterContent_1(r,Ve(Qe)),ke(),qe&&ve.emscripten_bind_CvrWasm_AppendParameterContent_1(r,Ve(qe)),ke(),n=UTF8ToString(ve.emscripten_bind_CvrWasm_InitParameter_0(r)),Ze(t,{success:!0,response:n})}catch(e){Ke(t,e)}},cvr_getMaxBufferedItems:async(e,t,r)=>{let n;try{n=ve.emscripten_bind_CvrWasm_GetMaxBufferedItems_0(r),Ze(t,{success:!0,count:n})}catch(e){Ke(t,e)}},cvr_setMaxBufferedItems:async(e,t,r)=>{let n;try{n=ve.emscripten_bind_CvrWasm_SetMaxBufferedItems_1(r,e.count),Ze(t,{success:!0})}catch(e){Ke(t,e)}},cvr_getBufferedCharacterItemSet:async(e,t,r)=>{let n;try{n=JSON.parse(UTF8ToString(ve.emscripten_bind_CvrWasm_GetBufferedCharacterItemSet_0(r)));for(let e of n.items){let t=e.image.bytes;t&&(t=new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length)),e.image.bytes=t)}for(let e of n.characterClusters){let t=e.mean.image.bytes;t&&(t=new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length)),e.mean.image.bytes=t)}Ze(t,{success:!0,itemSet:n})}catch(e){Ke(t,e)}},cvr_setIrrRegistry:async(e,t,r)=>{try{if(tt.has(r)){ke(),ve.emscripten_bind_CvrWasm_SetIrrRegistry_1(r,Ve(JSON.stringify(e.receiverObj))),e.observedResultUnitTypes&&"-1"!==e.observedResultUnitTypes&&(ke(),ve.emscripten_bind_CvrWasm_SetObservedResultUnitTypes_1(r,Ve(e.observedResultUnitTypes)));for(let t in e.observedTaskMap)e.observedTaskMap[t]?(ke(),ve.emscripten_bind_CvrWasm_AddObservedTask_1(r,Ve(t))):(ke(),ve.emscripten_bind_CvrWasm_RemoveObservedTask_1(r,Ve(t)))}Ze(t,{success:!0})}catch(e){Ke(t,e)}},cvr_enableResultCrossVerification:async(e,t,r)=>{let n;try{for(let t in e.verificationEnabled)n=ve.emscripten_bind_CvrWasm_EnableResultCrossVerification_2(r,Number(t),e.verificationEnabled[t]);Ze(t,{success:!0,result:n})}catch(e){Ke(t,e)}},cvr_enableResultDeduplication:async(e,t,r)=>{let n;try{for(let t in e.duplicateFilterEnabled)n=ve.emscripten_bind_CvrWasm_EnableResultDeduplication_2(r,Number(t),e.duplicateFilterEnabled[t]);Ze(t,{success:!0,result:n})}catch(e){Ke(t,e)}},cvr_setDuplicateForgetTime:async(e,t,r)=>{let n;try{for(let t in e.duplicateForgetTime)n=ve.emscripten_bind_CvrWasm_SetDuplicateForgetTime_2(r,Number(t),e.duplicateForgetTime[t]);Ze(t,{success:!0,result:n})}catch(e){Ke(t,e)}},cvr_getDuplicateForgetTime:async(e,t,r)=>{let n;try{n=ve.emscripten_bind_CvrWasm_GetDuplicateForgetTime_1(r,e.type),Ze(t,{success:!0,time:n})}catch(e){Ke(t,e)}},cvr_containsTask:async(e,t,r)=>{try{ke();const n=UTF8ToString(ve.emscripten_bind_CvrWasm_ContainsTask_1(r,Ve(e.templateName)));Ze(t,{success:!0,tasks:n})}catch(e){Ke(t,e)}},cvr_dispose:async(e,t,r)=>{try{tt.delete(r),ve.emscripten_bind_Destory_CImageData(et),et=null,ve.emscripten_bind_CvrWasm___destroy___0(r),Ze(t,{success:!0})}catch(e){Ke(t,e)}},cvr_getWasmFilterState:async(e,t,r)=>{let n;try{n=UTF8ToString(ve.emscripten_bind_CvrWasm_GetFilterState_0(r)),Ze(t,{success:!0,response:n})}catch(e){Ke(t,e)}}}),Me.licenseWorkerVersion="3.0.3000";const lt=async e=>{try{await Be("core"),ot=e.trial,_t=e.msg,ke(),Et=JSON.parse(UTF8ToString(ve.emscripten_bind_CoreWasm_static_init_1(Ve(JSON.stringify(e)))))}catch(e){throw e}},dt=()=>{let e=Ye.getMinExpireTime;return e?e():null},ut=()=>{let e=Ye.getMaxExpireTime;return e?e():null};Me.checkAndReauth=async()=>{},Object.assign(Xe,{license_dynamsoft:async(e,t)=>{try{let r,n=e.l,s=e.brtk,a=async()=>{ct=ct||Ue({dm:strDomain,log:$e,bd:bDebug}),Me.scsd=ct.s,e.pd="",e.v="0."+e.v,e.updl=lt,e.mnet=dt,e.mxet=ut,await ct.i(e)},i=async()=>{if(n.startsWith("DLC2"))ct=ct||Ue({dm:strDomain,log:$e,bd:bDebug}),await ct.i2({updl:lt,mxet:ut,strDLC2:n});else{let e={pk:n,dm:strDomain};bDebug&&(e.bd=!0),await lt(e)}};s?await a():await i(),Ze(t,{trial:ot,ltsErrorCode:r,message:_t,initLicenseInfo:Et,bSupportDce4Module:ve.emscripten_bind_CoreWasm_static_GetIsSupportDceModule_0(),bSupportIRTModule:ve.emscripten_bind_CoreWasm_static_GetIsSupportIRTModule_0()})}catch(e){Ke(t,e)}},license_getDeviceUUID:async(e,t)=>{try{ct=ct||Ue({dm:strDomain,log:$e,bd:bDebug});let e=await ct.u();Ze(t,{uuid:e})}catch(e){Ke(t,e)}},license_getAR:async(e,t)=>{try{if(ct){let e={u:await ct.u(),pt:ct.pt()},r=ct.ar();r&&(e.ar=r);let n=ct.ae();n&&(e.lem=n.message,e.lec=n.ltsErrorCode),Ze(t,e)}else Ze(t,null)}catch(e){Ke(t,e)}}});let It={};Me.dlrWorkerVersion="3.0.3000";const ft=Me.checkAndAutoLoadCharsData=async(e,t,r)=>{if(!It[t]){let n={ConfusableChars:5561,OverLappingChars:486901}[t];It[t]=(async()=>{try{let s;const a=r+t+".data",i=await new Promise(((e,s)=>{const i=new XMLHttpRequest;i.responseType="arraybuffer",i.onload=()=>{i.status<200||i.status>=300?e({ok:!1,status:i.status}):e({ok:!0,arrayBuffer:()=>i.response})},i.onerror=i.onabort=()=>{s({ok:!1,status:i.status})},i.onloadstart=()=>{postMessage({type:"event",id:-1,body:{loaded:0,total:n||0,tag:"starting",resourcesPath:r+t+".data"}})},i.onloadend=()=>{postMessage({type:"event",id:-1,body:{loaded:n||0,total:n||0,tag:"completed",resourcesPath:r+t+".data"}})};let o=Date.now();i.onprogress=e=>{if(e.lengthComputable&&(n=e.total),n){const t=Date.now();o+500<t&&(postMessage({type:"event",id:-1,body:{total:n,loaded:e.loaded,tag:"in progress",resourcesPath:a}}),o=t)}},i.open("GET",a,!0),i.send()}));if(!i.ok)throw new Error(`Network error. ${a} Status: ${i.status}.`);s=await i.arrayBuffer();const o=new Uint8Array(s);let _;return ke(),"confusable"===e?_=UTF8ToString(ve.emscripten_bind_DlrWasm_AppendConfusableCharactersBuffer_3(Ve(t),setBufferIntoWasm(o,0),o.length)):"overlapping"===e&&(_=UTF8ToString(ve.emscripten_bind_DlrWasm_AppendOverLappingCharactersBuffer_3(Ve(t),setBufferIntoWasm(o,0),o.length))),_}catch(e){throw delete It[t],new Error(e)}})()}};Object.assign(Xe,{dlr_loadData:async(e,t)=>{try{await ft(e.type,e.dataName,e.dataPath);let r=await It[e.dataName];Ze(t,{success:!0,result:r})}catch(e){return void Ke(t,e)}}}),Me.ddnWorkerVersion="3.0.3000",Object.assign(Xe,{ddn_setThresholdValue:async(e,t,r)=>{try{const n=ve.emscripten_bind_DdnWasm_0(r);ve.emscripten_bind_DdnWasm_setThresholdValue_3(n,e.threshold,e.leftLimit,e.rightLimit),Ze(t,{success:!0})}catch(e){return void Ke(t,e)}}});let mt=new Map,Tt=new Map;Me.dcpWorkerVersion="3.0.3000";const pt=Me.checkAndAutoLoadResourceBuffer=async(e,t)=>{if(e=e.toUpperCase(),!mt.has(e)){let r,n;mt.set(e,(async()=>{try{r=await I(t+e+".dcpres","arraybuffer");const s=new Uint8Array(r);n=UTF8ToString(ve.emscripten_bind_DcpWasm_GetMapNameBySpecification_2(setBufferIntoWasm(s,0),s.length)),n&&!Tt.has(n)&&Tt.set(n,I(t+n,"arraybuffer"));const a=await Tt.get(n);if(a){const t=new Uint8Array(a);ke(),$e(UTF8ToString(ve.emscripten_bind_DcpWasm_AppendResourceBuffer_5(Ve(e+".dcpres"),setBufferIntoWasm(s,0),s.length,setBufferIntoWasm(t,1),t.length)))}else ke(),$e(UTF8ToString(ve.emscripten_bind_DcpWasm_AppendResourceBuffer_5(Ve(e+".dcpres"),setBufferIntoWasm(s,0),s.length,null,0)));return!0}catch(t){throw mt.delete(e),Tt.delete(n),new Error(t)}})())}await mt.get(e)};Object.assign(Xe,{dcp_appendResourceBuffer:async(e,t)=>{try{for(let t of e.specificationNames)await pt(t,e.specificationPath)}catch(e){return void Ke(t,e)}Ze(t,{success:!0})},dcp_createInstance:async(e,t)=>{try{let e=ve.emscripten_bind_DcpWasm_CreateInstance_0();Ze(t,{instanceID:e})}catch(e){return void Ke(t,e)}},dcp_dispose:async(e,t,r)=>{try{ve.emscripten_bind_DcpWasm___destroy___0(r),Ze(t,{success:!0})}catch(e){Ke(t,e)}},dcp_initSettings:async(e,t,r)=>{try{ke();let n=UTF8ToString(ve.emscripten_bind_DcpWasm_InitSettings_1(r,Ve(e.settings)));Ze(t,{success:!0,response:n})}catch(e){return void Ke(t,e)}},dcp_resetSettings:async(e,t,r)=>{try{ve.emscripten_bind_DcpWasm_ResetSettings_0(r),Ze(t,{success:!0})}catch(e){return void Ke(t,e)}},dcp_parse:async(e,t,r)=>{try{ke();let n=UTF8ToString(ve.emscripten_bind_DcpWasm_Parse_3(r,setBufferIntoWasm(e.source,0),e.source.length,Ve(e.taskSettingName)));"parse failed."===n&&(n=JSON.stringify({errorCode:!0,errorString:"parse failed."})),Ze(t,{success:!0,parseResponse:n})}catch(e){return void Ke(t,e)}}}),Me.utilityWorkerVersion="3.0.3000";const Ct=e=>{let t=e.bytes;t&&(t=new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length)),e.bytes=t)};Object.assign(Xe,{utility_drawOnImage:async(e,t)=>{let r;try{let n=ve.emscripten_bind_Create_CImageData(e.dsImage.bytes.length,setBufferIntoWasm(e.dsImage.bytes,0),e.dsImage.width,e.dsImage.height,e.dsImage.stride,e.dsImage.format,0);const s=e.type.charAt(0).toUpperCase()+e.type.slice(1);ke(),r=JSON.parse(UTF8ToString(ve[`emscripten_bind_UtilityWasm_DrawOnImage${s}`](n,Ve(JSON.stringify(e.drawingItem)),e.drawingItem.length,e.color,e.thickness)));let a=r.bytes;a&&(a=new Uint8Array(new Uint8Array(HEAP8.buffer,a.ptr,a.length)),r.bytes=a),ve.emscripten_bind_Destory_CImageData(n),Ze(t,{success:!0,image:r})}catch(e){return void Ke(t,e)}},utility_readFromMemory:async(e,t)=>{try{let r=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_ReadFromMemory(e.ptr,e.length)));Ct(r),Ze(t,{success:!0,imageData:r})}catch(e){return void Ke(t,e)}},utility_saveToMemory:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=UTF8ToString(ve.emscripten_bind_UtilityWasm_SaveToMemory(r,e.fileFormat));ve.emscripten_bind_Destory_CImageData(r),Ze(t,{success:!0,memery:n})}catch(e){return void Ke(t,e)}},utility_cropImage:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0);ke();let n=JSON.parse(UTF8ToString(ve[`emscripten_bind_UtilityWasm_CropImageFrom${e.type}`](r,Ve(JSON.stringify(e.roi)))));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,cropImage:n})}catch(e){return void Ke(t,e)}},utility_adjustBrightness:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_AdjustBrightness(r,e.brightness)));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,adjustBrightness:n})}catch(e){return void Ke(t,e)}},utility_adjustContrast:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_AdjustContrast(r,e.contrast)));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,adjustContrast:n})}catch(e){return void Ke(t,e)}},utility_filterImage:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_FilterImage(r,e.filterType)));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,filterImage:n})}catch(e){return void Ke(t,e)}},utility_convertToGray:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_ConvertToGray(r,e.R,e.G,e.B)));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,convertToGray:n})}catch(e){return void Ke(t,e)}},utility_convertToBinaryGlobal:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_ConvertToBinaryGlobal(r,e.threshold,e.invert)));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,convertToBinaryGlobal:n})}catch(e){return void Ke(t,e)}},utility_convertToBinaryLocal:async(e,t)=>{try{let r=ve.emscripten_bind_Create_CImageData(e.bytes.length,setBufferIntoWasm(e.bytes,0),e.width,e.height,e.stride,e.format,0),n=JSON.parse(UTF8ToString(ve.emscripten_bind_UtilityWasm_ConvertToBinaryLocal(r,e.blockSize,e.compensation,e.invert)));ve.emscripten_bind_Destory_CImageData(r),Ct(n),Ze(t,{success:!0,convertToBinaryLocal:n})}catch(e){return void Ke(t,e)}}})}();
